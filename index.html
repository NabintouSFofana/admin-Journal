<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Admin ¬∑ Journal de Nabie</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Polices identiques √† index.html -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet" />

  <style>
    :root {
      --pink-soft: #fce7f3;
      --pink-main: #f9a8d4;
      --yellow-soft: #fef9c3;
      --yellow-main: #facc15;
      --bg-main: #fff7fb;
      --text-main: #111827;
      --text-muted: #6b7280;
      --border-soft: #f5d0fe;
      --white: #ffffff;
      --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.08);
      --radius-lg: 24px;
      --radius-md: 18px;
      --radius-pill: 999px;
      --max-width: 1200px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

   html {
  overflow-y: scroll;
  background: radial-gradient(circle at top left, #fce7f3 0, #fff7fb 40%, #fef9c3 85%);
}

body {
  font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: radial-gradient(circle at top left, #fce7f3 0, #fff7fb 40%, #fef9c3 85%);
  color: var(--text-main);
  min-height: 100vh;
  max-width: 100%;
  overflow-x: hidden; /* üîí bloque le scroll gauche/droite */
}



    a {
      color: inherit;
      text-decoration: none;
    }

    /* ===== LAYOUT ===== */

    .admin-shell {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 20px 16px 40px;
      display: grid;
      grid-template-columns: 260px minmax(0, 1fr);
      gap: 20px;
    }

    @media (max-width: 880px) {
      .admin-shell {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .admin-sidebar {
      background: rgba(255, 255, 255, 0.96);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(252, 231, 243, 0.9);
      padding: 18px 16px 18px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      position: sticky;
      top: 16px;
      height: fit-content;
    }

    .admin-main {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    /* ===== BRAND ===== */

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-badge {
      width: 36px;
      height: 36px;
      border-radius: 18px;
      background: conic-gradient(from 160deg, #f9a8d4, #facc15, #fce7f3, #f9a8d4);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #020617;
      font-weight: 700;
      box-shadow: 0 4px 18px rgba(248, 113, 113, 0.45);
    }

    .brand-title {
      font-family: "Playfair Display", serif;
      font-size: 18px;
    }

    .brand-subtitle {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-muted);
    }

    /* ===== NAV ===== */

    .nav-section-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-muted);
      margin-top: 6px;
      margin-bottom: 4px;
    }

    .nav-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .nav-link {
      border-radius: 14px;
      padding: 8px 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 13px;
      cursor: pointer;
      border: 1px solid transparent;
      background: transparent;
    }

    .nav-link span {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .nav-link small {
      font-size: 11px;
      color: var(--text-muted);
    }

    .nav-link:hover {
      background: var(--pink-soft);
      border-color: rgba(251, 207, 232, 0.9);
    }

    .nav-link.active {
      background: linear-gradient(135deg, #f9a8d4, #facc15);
      color: #020617;
      border-color: transparent;
      box-shadow: 0 10px 28px rgba(248, 113, 113, 0.35);
    }

    .nav-footer {
      margin-top: 8px;
      padding-top: 10px;
      border-top: 1px dashed rgba(148, 163, 184, 0.5);
      font-size: 11px;
      color: var(--text-muted);
    }

    .nav-footer a {
      text-decoration: underline;
      text-underline-offset: 2px;
    }

    /* ===== TOP BAR ===== */

    .top-bar {
      background: rgba(255, 255, 255, 0.96);
      border-radius: var(--radius-lg);
      padding: 14px 16px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(252, 231, 243, 0.9);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
    }

    .top-bar h1 {
      font-size: 18px;
    }

    .top-bar p {
      font-size: 12px;
      color: var(--text-muted);
    }

    .pill {
      padding: 6px 12px;
      border-radius: var(--radius-pill);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      background: rgba(254, 249, 195, 0.9);
      border: 1px solid rgba(250, 204, 21, 0.7);
    }

    /* ===== SECTIONS ===== */

    .admin-section {
      background: rgba(255, 255, 255, 0.96);
      border-radius: var(--radius-lg);
      padding: 16px 16px 18px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(252, 231, 243, 0.9);
      display: none;
    }

    .admin-section.active {
      display: block;
    }

    .section-header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
    }

    .section-header-title h2 {
      margin-bottom: 2px;
    }

    .section-header-title p {
      font-size: 12px;
      color: var(--text-muted);
    }
 
    .section-header--stack {
      flex-direction: column;
      align-items: flex-start;
      gap: 2px;
    }

    .section-header--stack p {
      font-size: 12px;
      color: var(--text-muted);
    }


    .section-header h2 {
      font-size: 16px;
    }

    .section-header p {
      font-size: 12px;
      color: var(--text-muted);
    }

    .grid-2 {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 16px;
    }

    @media (max-width: 720px) {
      .grid-2 {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: #fff7fb;
      border-radius: 18px;
      padding: 12px 12px 14px;
      border: 1px dashed rgba(248, 187, 208, 0.9);
      font-size: 13px;
    }

    .card h3 {
      font-size: 14px;
      margin-bottom: 6px;
    }

    .card-title-sub {
      display: block;
      font-size: 12px;
      font-weight: 400;
      color: var(--text-muted);
      margin-top: 2px;
    }


    .helper-text {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 2px;
      margin-bottom: 6px;
    }

    /* ===== FORMS ===== */

    label {
      font-size: 12px;
      font-weight: 500;
    }

    input[type="text"],
    input[type="email"],
    input[type="number"],
    textarea,
    select {
      width: 100%;
      padding: 7px 10px;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      font-size: 12px;
      outline: none;
      background: #ffffff;
      resize: vertical;
      min-height: 34px;
    }

    textarea {
      min-height: 90px;
      line-height: 1.5;
    }

    input:focus,
    textarea:focus,
    select:focus {
      border-color: #ec4899;
      box-shadow: 0 0 0 1px rgba(236, 72, 153, 0.35);
    }

    .form-grid {
      display: grid;
      gap: 10px;
      margin-top: 4px;
    }

    .field-row {
      display: flex;
      gap: 10px;
    }

    .field-row > div {
      flex: 1;
    }

    @media (max-width: 560px) {
      .field-row {
        flex-direction: column;
      }
    }

    .btn-primary,
    .btn-ghost,
    .btn-danger,
    .btn-small {
      border-radius: var(--radius-pill);
      border: none;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      padding: 8px 14px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #111827, #020617);
      color: var(--white);
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.45);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 36px rgba(15, 23, 42, 0.55);
    }

    .btn-ghost {
      background: #ffffff;
      border: 1px solid rgba(148, 163, 184, 0.7);
      color: var(--text-main);
    }

    .btn-danger {
      background: rgba(248, 113, 113, 0.1);
      border: 1px solid rgba(248, 113, 113, 0.9);
      color: #b91c1c;
    }

    .btn-small {
      padding: 4px 8px;
      font-size: 11px;
    }

    .btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 6px;
    }


    /* ===== LOGIN SCREEN ===== */
.login-screen {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px 16px;
}

.login-card {
  max-width: 420px;
  width: 100%;
  background: rgba(255, 255, 255, 0.96);
  border-radius: 24px;
  box-shadow: var(--shadow-soft);
  border: 1px solid rgba(252, 231, 243, 0.9);
  padding: 20px 18px 22px;
}

.login-brand {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
}

.login-title {
  font-size: 18px;
  margin-bottom: 4px;
}

.login-text {
  font-size: 13px;
  color: var(--text-muted);
  margin-bottom: 12px;
}

.login-form {
  display: grid;
  gap: 10px;
  margin-top: 4px;
}

.login-form label {
  font-size: 12px;
  font-weight: 500;
}

.login-form input {
  width: 100%;
  padding: 7px 10px;
  border-radius: 10px;
  border: 1px solid rgba(148, 163, 184, 0.7);
  font-size: 12px;
  outline: none;
  background: #ffffff;
}

.login-form input:focus {
  border-color: #ec4899;
  box-shadow: 0 0 0 1px rgba(236, 72, 153, 0.35);
}

.login-btn {
  width: 100%;
  justify-content: center;
  margin-top: 4px;
}

.login-error {
  font-size: 12px;
  color: #b91c1c;
  min-height: 16px;
}

.login-note {
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 10px;
}


    /* ===== TABLES / LISTES ===== */

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 6px;
      font-size: 12px;
    }

    th,
    td {
      padding: 6px 6px;
      text-align: left;
      border-bottom: 1px solid rgba(226, 232, 240, 0.9);
      vertical-align: top;
    }

    th {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
    }

    tr:last-child td {
      border-bottom: none;
    }

    .table-wrapper {
      margin-top: 6px;
      max-width: 100%;
      overflow-x: auto;      /* scroll horizontal si besoin */
    }

    .table-wrapper table {
      width: 100%;
    }

    .table-wrapper th,
    .table-wrapper td {
      white-space: nowrap;    /* √©vite que tout casse √† la ligne bizarrement */
    }

    
    .messages-table-wrapper {
      margin-top: 6px;
      max-height: 320px;
      overflow-y: auto;
      overflow-x: auto;
    }

    #reply-text {
      min-height: 80px;
    }


    .tag {
      display: inline-flex;
      padding: 3px 8px;
      border-radius: 999px;
      font-size: 10px;
      background: rgba(254, 249, 195, 0.9);
      border: 1px solid rgba(250, 204, 21, 0.65);
    }

    .empty-state {
      font-size: 12px;
      color: var(--text-muted);
      padding: 4px 0;
    }

    .badge-status {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 7px;
      border-radius: 999px;
      font-size: 10px;
      background: rgba(209, 250, 229, 0.9);
      border: 1px solid rgba(16, 185, 129, 0.5);
      color: #047857;
    }

    .badge-status span {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #10b981;
    }

        /* Forcer le titre/texte de "Abonn√©es newsletter" √† √™tre l'un sous l'autre */
    #section-subscribers .section-header {
      display: block;           /* annule le flex */
      margin-bottom: 10px;
    }

    #section-subscribers .section-header h2 {
      margin-bottom: 2px;
    }

    #section-subscribers .section-header p {
      font-size: 12px;
      color: var(--text-muted);
    }


    /* JSON textarea */
    #export-json {
      font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;
      font-size: 11px;
      min-height: 200px;
      white-space: pre;
    }
  </style>
</head>
<body>
  <!-- √âCRAN DE LOGIN -->
  <div class="login-screen" id="loginScreen">
    <div class="login-card">
      <div class="login-brand">
        <div class="brand-badge">N</div>
        <div>
          <div class="brand-title">Admin ¬∑ Journal de Nabie</div>
          <div class="brand-subtitle">Acc√®s r√©serv√©</div>
        </div>
      </div>

      <h1 class="login-title">Connexion admin</h1>
      <p class="login-text">
        Cet espace est priv√©. Merci d‚Äôentrer tes identifiants pour continuer.
      </p>

      <form id="login-form" class="login-form">
        <div>
          <label for="login-username">Identifiant</label>
          <input type="text" id="login-username" placeholder="Ex : nabie" required />
        </div>
        <div>
          <label for="login-password">Mot de passe</label>
          <input type="password" id="login-password" placeholder="Mot de passe" required />
        </div>
        <p id="login-error" class="login-error"></p>
        <button type="submit" class="btn-primary login-btn">Se connecter</button>
      </form>


    </div>
  </div>

  <!-- ADMIN SHELL (cach√© tant que pas connect√©) -->
  <div class="admin-shell" id="adminShell" style="display:none;">
  
    <!-- SIDEBAR -->
    <aside class="admin-sidebar">
      <div class="brand">
        <div class="brand-badge">N</div>
        <div>
          <div class="brand-title">Admin ¬∑ Journal de Nabie</div>
          <div class="brand-subtitle">Organisation du blog</div>
        </div>
      </div>

      <div class="nav-section-label">Vue g√©n√©rale</div>
      <div class="nav-list">
        <button class="nav-link active" data-section="dashboard">
          <span>Tableau de bord</span>
          <small id="nav-total">0 √©l√©ments</small>
        </button>
      </div>

      <div class="nav-section-label">Contenu</div>
      <div class="nav-list">
        <button class="nav-link" data-section="posts">
          <span>Articles</span>
          <small id="nav-posts">0</small>
        </button>
        <button class="nav-link" data-section="messages">
          <span>Messages re√ßus</span>
          <small id="nav-messages">0</small>
        </button>
        <button class="nav-link" data-section="subscribers">
          <span>Abonn√©es newsletter</span>
          <small id="nav-subs">0</small>
        </button>
        <button class="nav-link" data-section="subscriptions">
          <span>Souscriptions / programmes</span>
          <small id="nav-plans">0</small>
        </button>
      </div>

      <div class="nav-section-label">Technique</div>
      <div class="nav-list">
        <button class="nav-link" data-section="settings">
          <span>Export & r√©initialisation</span>
        </button>
      </div>

      <div class="nav-footer">
        Ici tu peux g√©rer ton contenu  
        sans toucher au code.  
        <br />‚ûú <a href="index.html" target="_blank">Voir le blog public</a>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="admin-main">
      <section class="top-bar">
        <div>
          <h1>Espace admin ¬∑ Journal de Nabie</h1>
          <p>
            Centralise les messages, abonn√©es, articles et programmes pour t‚Äôorganiser en douceur. üå∏
          </p>
        </div>
        <div class="pill">BismiLlah ¬∑ on s‚Äôorganise</div>
      </section>

      <!-- DASHBOARD -->
      <section class="admin-section active" id="section-dashboard">
        <div class="section-header">
          <h2>Tableau de bord</h2>
          <p>Petit r√©sum√© rapide de ce qui se passe sur ton blog.</p>
        </div>

        <div class="grid-2">
          <div class="card">
            <h3>Chiffres principaux</h3>
            <table>
              <tbody>
                <tr>
                  <th>Articles</th>
                  <td id="dash-posts">0</td>
                </tr>
                <tr>
                  <th>Messages re√ßus</th>
                  <td id="dash-messages">0</td>
                </tr>
                <tr>
                  <th>Abonn√©es newsletter</th>
                  <td id="dash-subs">0</td>
                </tr>
                <tr>
                  <th>Souscriptions / programmes</th>
                  <td id="dash-plans">0</td>
                </tr>
              </tbody>
            </table>
            <p class="helper-text">
              Ces donn√©es sont stock√©es dans ton navigateur (localStorage).  
              Rien n‚Äôest encore envoy√© sur un vrai serveur.
            </p>
            <div class="btn-row">
              <button class="btn-primary" data-jump="posts">√âcrire un article</button>
              <button class="btn-ghost" data-jump="messages">Voir les messages</button>
            </div>
          </div>

          <div class="card">
            <h3>Dernier message re√ßu</h3>
            <div id="dash-last-message">
              <p class="empty-state">Aucun message pour l‚Äôinstant.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- ARTICLES -->
    <!-- ARTICLES DU BLOG -->
<section class="admin-section" id="section-posts">
  <div class="section-header">
    <h2>Articles du blog</h2>
    <p>√âcris, modifie ou supprime tes articles sans toucher au HTML.</p>
  </div>

  <!-- Formulaire article -->
  <div class="card-light">
    <h3>Nouvel article / modifier un article</h3>
    <p class="helper-text">
      Remplis ce formulaire puis clique sur ‚ÄúEnregistrer‚Äù. Tu pourras ensuite √©diter ou supprimer l‚Äôarticle dans la liste.
    </p>

    <form id="post-form" class="form-grid">
      <input type="hidden" id="post-id" />

      <div>
        <label for="post-title">Titre *</label>
        <input
          type="text"
          id="post-title"
          placeholder="Ex : Quand le c≈ìur est fatigu√© mais que la foi tient debout"
          required
        />
      </div>

      <div class="field-row">
        <div>
          <label for="post-category">Cat√©gorie *</label>
          <select id="post-category" required>
            <option value="Foi">Foi</option>
            <option value="Lifestyle">Lifestyle</option>
            <option value="Cheveux cr√©pus">Cheveux cr√©pus</option>
            <option value="Carri√®re & tech">Carri√®re & tech</option>
            <option value="Sant√© mentale">Sant√© mentale</option>
            <option value="Histoires perso">Histoires perso</option>
          </select>
        </div>
        <div>
          <label for="post-readtime">Temps de lecture (min)</label>
          <input type="number" id="post-readtime" min="1" max="60" placeholder="5" />
        </div>
      </div>

      <div>
        <label for="post-excerpt">Extrait court *</label>
        <textarea
          id="post-excerpt"
          placeholder="Une ou deux phrases qui donnent envie de cliquer..."
          required
        ></textarea>
      </div>

      <div>
        <label for="post-content">Texte complet *</label>
        <textarea
          id="post-content"
          placeholder="√âcris ici ton article, comme dans ton journal..."
          required
        ></textarea>
      </div>

      <div class="field-row">
        <div>
          <label for="post-slug">Identifiant (optionnel)</label>
          <input
            type="text"
            id="post-slug"
            placeholder="ex : quand-le-coeur-est-fatigue"
          />
          <p class="helper-text">
            Tu pourras utiliser cet identifiant plus tard dans ton HTML si besoin.
          </p>
        </div>
        <div>
          <label for="post-status">Statut</label>
          <select id="post-status">
            <option value="brouillon">Brouillon</option>
            <option value="publie">Publi√©</option>
          </select>
        </div>
      </div>

      <div class="btn-row">
        <button type="submit" class="btn-primary">Enregistrer l‚Äôarticle</button>
        <button type="button" id="post-reset" class="btn-ghost">Vider le formulaire</button>
      </div>
    </form>
  </div>

  <!-- Liste des articles -->
  <div class="card-light" style="margin-top:12px;">
    <h3>Articles enregistr√©s</h3>
    <p class="helper-text">
      Les articles sont sauvegard√©s dans ton navigateur. Tu peux les exporter plus tard dans la partie ‚ÄúExport & r√©initialisation‚Äù.
    </p>
    <div id="posts-list">
  <p class="empty-state">Aucun article pour l‚Äôinstant. Commence en cr√©ant ton premier article ci-dessus.</p>
</div>
  </div>
</section>

          <!-- MESSAGES -->
      <section class="admin-section" id="section-messages">
        <div class="section-header">
          <h2>Messages re√ßus</h2>
          <p>Messages depuis le formulaire du blog. Clique sur un message pour y r√©pondre.</p>
        </div>

        <div class="card">
          <h3>Tous les messages</h3>
          <p class="helper-text">
            Messages depuis le formulaire du blog (et plus tard d‚Äôautres sources si besoin).
          </p>
          <div id="messages-list" class="messages-table-wrapper">
            <p class="empty-state">Aucun message pour l‚Äôinstant.</p>
          </div>
        </div>

        <div class="card" style="margin-top:12px;">
          <h3>Message s√©lectionn√© & r√©ponse</h3>
          <p class="helper-text">
            Clique sur une ligne dans la liste ci-dessus pour voir le message, puis √©cris ta r√©ponse.
            Tu pourras la copier et l‚Äôenvoyer par e-mail, WhatsApp ou Instagram.
          </p>
          <div id="message-detail">
            <p class="empty-state">Aucun message s√©lectionn√©.</p>
          </div>

          <div id="message-reply-block" style="margin-top:10px; display:none;">
            <label for="reply-text">Ta r√©ponse (brouillon)</label>
            <textarea id="reply-text"
              placeholder="√âcris ta r√©ponse ici, tu pourras la copier ensuite dans ton e-mail ou tes messages priv√©s‚Ä¶"></textarea>

              <div class="btn-row">
    <button type="button" class="btn-primary" id="save-reply">Enregistrer le brouillon</button>
    <button type="button" class="btn-ghost" id="copy-reply">Copier le texte</button>
    <button type="button" class="btn-ghost" id="send-email">Envoyer par e-mail</button>
  </div>

            <p class="helper-text" id="reply-status"></p>
          </div>
        </div>
      </section>

<!-- ABONNEES NEWSLETTER -->
<section class="admin-section" id="section-subscribers">
  <div class="section-header">
    <h2>Abonn√©es newsletter</h2>
    <p>Les e-mails collect√©s via ton formulaire + celles que tu ajoutes √† la main.</p>
  </div>

  <!-- Carte formulaire -->
  <div class="card">
    <h3>Ajouter une abonn√©e</h3>
    <form id="sub-form" class="form-grid">
      <div class="field-row">
        <div>
          <label for="sub-name">Pr√©nom</label>
          <input type="text" id="sub-name" placeholder="Ex : Mariam" />
        </div>
        <div>
          <label for="sub-email">E-mail *</label>
          <input type="email" id="sub-email" placeholder="mariam@example.com" />
        </div>
      </div>
      <div>
        <label for="sub-source">Source</label>
        <select id="sub-source">
          <option value="Formulaire newsletter blog">Formulaire newsletter blog</option>
          <option value="Instagram">Instagram</option>
          <option value="Facebook">Facebook</option>
          <option value="WhatsApp">WhatsApp</option>
          <option value="Autre">Autre</option>
        </select>
      </div>
      <div class="btn-row">
        <button type="submit" class="btn-primary">Ajouter √† la liste</button>
        <button type="button" class="btn-ghost" id="sub-reset">Vider</button>
      </div>
      <p class="helper-text">
        Plus tard, tu pourras exporter cette liste dans un outil comme Mailerlite, Sendinblue, etc.
      </p>
    </form>
  </div>

  <!-- Carte liste en dessous -->
  <div class="card" style="margin-top:12px;">
    <h3>
      Abonn√©es newsletter
      <span class="card-title-sub">Liste des abonn√©es</span>
    </h3>
    <div id="subs-list">
      <p class="empty-state">Aucune abonn√©e pour l‚Äôinstant.</p>
    </div>
  </div>
</section>

 <!-- SOUSCRIPTIONS / PROGRAMMES -->
<section class="admin-section" id="section-subscriptions">
  <div class="section-header">
    <h2>Souscriptions & programmes</h2>
    <p>Pour suivre qui s‚Äôest inscrit √† quel programme, pack ou accompagnement.</p>
  </div>

  <!-- Carte formulaire -->
  <div class="card">
    <h3>Ajouter une souscription</h3>
    <form id="plan-form" class="form-grid">
      <div class="field-row">
        <div>
          <label for="plan-name">Pr√©nom / pseudo *</label>
          <input type="text" id="plan-name" placeholder="Ex : Fatou" />
        </div>
        <div>
          <label for="plan-email">E-mail</label>
          <input type="email" id="plan-email" placeholder="Optionnel" />
        </div>
      </div>
      <div>
        <label for="plan-offer">Programme / offre *</label>
        <input
          type="text"
          id="plan-offer"
          placeholder="Ex : Programme 30 jours pour le c≈ìur / Pack capillaire"
        />
      </div>
      <div class="field-row">
        <div>
          <label for="plan-channel">Canal</label>
          <select id="plan-channel">
            <option value="Instagram">Instagram</option>
            <option value="Facebook">Facebook</option>
            <option value="WhatsApp">WhatsApp</option>
            <option value="E-mail">E-mail</option>
            <option value="Autre">Autre</option>
          </select>
        </div>
        <div>
          <label for="plan-status">Statut</label>
          <select id="plan-status">
            <option value="en cours">En cours</option>
            <option value="pay√©">Pay√©</option>
            <option value="√† relancer">√Ä relancer</option>
            <option value="termin√©">Termin√©</option>
          </select>
        </div>
      </div>
      <div>
        <label for="plan-note">Note interne</label>
        <textarea
          id="plan-note"
          placeholder="D√©tails importants : mode de paiement, date de d√©but, particularit√©s..."
        ></textarea>
      </div>
      <div class="btn-row">
        <button type="submit" class="btn-primary">Enregistrer la souscription</button>
        <button type="button" class="btn-ghost" id="plan-reset">Vider</button>
      </div>
    </form>
  </div>

  <!-- Carte liste en dessous -->
  <div class="card" style="margin-top:12px;">
    <h3>Liste des souscriptions</h3>
    <div id="plans-list" class="table-wrapper">
      <p class="empty-state">Aucune souscription pour l‚Äôinstant.</p>
    </div>
  </div>
</section>


      <!-- SETTINGS -->
      <section class="admin-section" id="section-settings">
        <div class="section-header">
          <h2>Export & r√©initialisation</h2>
          <p>R√©cup√®re tes donn√©es ou repars de z√©ro.</p>
        </div>

        <div class="grid-2">
          <div class="card">
            <h3>Exporter en JSON</h3>
            <p class="helper-text">
              Tu peux copier ce JSON et le coller dans un document, un outil no-code ou un futur back-end.
            </p>
            <textarea id="export-json" readonly></textarea>
            <div class="btn-row" style="margin-top:6px;">
              <button class="btn-ghost" id="refresh-export">Actualiser les donn√©es</button>
            </div>
          </div>

          <div class="card">
            <h3>Tout effacer</h3>
            <p class="helper-text">
              Attention : cette action supprime toutes les donn√©es stock√©es dans ton navigateur  
              (articles, messages, abonn√©es, souscriptions). Utilise-la seulement si tu es s√ªre.
            </p>
            <button class="btn-danger" id="wipe-storage">Effacer toutes les donn√©es</button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="config.local.js"></script>
  <script>
    const ADMIN_USERNAME = window.ADMIN_USERNAME;
    const ADMIN_PASSWORD = window.ADMIN_PASSWORD;


    // ===== KEYS (identiques √† index.html pour messages & subscribers) =====

    const STORAGE_KEYS = {
      posts: "nb_blog_posts",
      messages: "nb_blog_messages",
      subscribers: "nb_blog_subscribers",
      plans: "nb_blog_subscriptions",
    };

    function loadArray(key) {
      try {
        const raw = localStorage.getItem(key);
        const parsed = raw ? JSON.parse(raw) : [];
        return Array.isArray(parsed) ? parsed : [];
      } catch (e) {
        console.error("Erreur lecture storage", e);
        return [];
      }
    }

    function saveArray(key, arr) {
      try {
        localStorage.setItem(key, JSON.stringify(arr));
      } catch (e) {
        console.error("Erreur √©criture storage", e);
      }
    }

    // ===== NAVIGATION =====
    const navButtons = document.querySelectorAll(".nav-link");
    const sections = {
      dashboard: document.getElementById("section-dashboard"),
      posts: document.getElementById("section-posts"),
      messages: document.getElementById("section-messages"),
      subscribers: document.getElementById("section-subscribers"),
      subscriptions: document.getElementById("section-subscriptions"),
      settings: document.getElementById("section-settings"),
    };

    function showSection(name) {
      Object.values(sections).forEach((sec) => sec.classList.remove("active"));
      if (sections[name]) sections[name].classList.add("active");
      navButtons.forEach((btn) => {
        btn.classList.toggle("active", btn.dataset.section === name);
      });
    }

    navButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const target = btn.dataset.section;
        if (target) showSection(target);
      });
    });

    document.querySelectorAll("[data-jump]").forEach((btn) => {
      btn.addEventListener("click", () => {
        const target = btn.getAttribute("data-jump");
        if (target) showSection(target);
      });
    });

    // ===== POSTS =====
    const postForm = document.getElementById("post-form");
    const postResetBtn = document.getElementById("post-reset");
    const postsListEl = document.getElementById("posts-list");

    function getPosts() {
      return loadArray(STORAGE_KEYS.posts);
    }
    function setPosts(posts) {
      saveArray(STORAGE_KEYS.posts, posts);
      renderPosts();
      updateDashboard();
    }

    function renderPosts() {
  const posts = getPosts();
  const navPostsEl = document.getElementById("nav-posts");

  if (navPostsEl) {
    navPostsEl.textContent = posts.length;
  }

  if (!postsListEl) {
    return; // si jamais l'√©l√©ment n'existe pas, on √©vite l'erreur
  }

  if (!posts.length) {
    postsListEl.innerHTML = '<p class="empty-state">Aucun article pour l‚Äôinstant.</p>';
    return;
  }

      let html =
        '<table><thead><tr><th>Titre</th><th>Cat√©gorie</th><th>Statut</th><th>Lecture</th><th></th></tr></thead><tbody>';
      posts.forEach((p) => {
        html += `<tr>
          <td>${p.title || ""}</td>
          <td>${p.category || ""}</td>
          <td><span class="badge-status"><span></span>${p.status === "publie" ? "Publi√©" : "Brouillon"}</span></td>
          <td>${p.readtime ? p.readtime + " min" : "-"}</td>
          <td>
            <button class="btn-small btn-ghost" data-edit-post="${p.id}">√âditer</button>
            <button class="btn-small btn-danger" data-delete-post="${p.id}">Supprimer</button>
          </td>
        </tr>`;
      });
      html += "</tbody></table>";
      postsListEl.innerHTML = html;

      postsListEl.querySelectorAll("[data-edit-post]").forEach((btn) => {
        btn.addEventListener("click", () => {
          loadPostInForm(btn.getAttribute("data-edit-post"));
        });
      });
      postsListEl.querySelectorAll("[data-delete-post]").forEach((btn) => {
        btn.addEventListener("click", () => {
          const id = btn.getAttribute("data-delete-post");
          if (!confirm("Supprimer cet article ?")) return;
          const updated = getPosts().filter((p) => p.id !== id);
          setPosts(updated);
        });
      });
    }

    function loadPostInForm(id) {
      const posts = getPosts();
      const p = posts.find((p) => p.id === id);
      if (!p) return;
      document.getElementById("post-id").value = p.id;
      document.getElementById("post-title").value = p.title || "";
      document.getElementById("post-category").value = p.category || "Foi";
      document.getElementById("post-readtime").value = p.readtime || "";
      document.getElementById("post-excerpt").value = p.excerpt || "";
      document.getElementById("post-content").value = p.content || "";
      document.getElementById("post-status").value = p.status || "brouillon";
      showSection("posts");
    }

    if (postForm) {
      postForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const id = document.getElementById("post-id").value || Date.now().toString();
        const title = document.getElementById("post-title").value.trim();
        const category = document.getElementById("post-category").value;
        const readtime = document.getElementById("post-readtime").value.trim();
        const excerpt = document.getElementById("post-excerpt").value.trim();
        const content = document.getElementById("post-content").value.trim();
        const status = document.getElementById("post-status").value;

        if (!title || !excerpt || !content) {
          alert("Merci de remplir au moins le titre, l‚Äôextrait et le texte complet.");
          return;
        }

        const posts = getPosts();
        const idx = posts.findIndex((p) => p.id === id);
        const obj = {
          id,
          title,
          category,
          readtime: readtime ? Number(readtime) : null,
          excerpt,
          content,
          status,
          updatedAt: new Date().toISOString(),
        };
        if (idx >= 0) posts[idx] = obj;
        else posts.push(obj);

        setPosts(posts);
        postForm.reset();
        document.getElementById("post-id").value = "";
        alert("Article enregistr√© dans l‚Äôadmin.");
      });
    }

    if (postResetBtn) {
      postResetBtn.addEventListener("click", () => {
        postForm.reset();
        document.getElementById("post-id").value = "";
      });
    }

    // ===== MESSAGES =====
    const msgForm = document.getElementById("message-form");
    const msgResetBtn = document.getElementById("msg-reset");
    let currentMessageIndex = null;
    const replyBlock = document.getElementById("message-reply-block");
    const replyTextarea = document.getElementById("reply-text");
    const replyStatus = document.getElementById("reply-status");
    const saveReplyBtn = document.getElementById("save-reply");
    const copyReplyBtn = document.getElementById("copy-reply");
    const sendEmailBtn = document.getElementById("send-email");

    const messagesListEl = document.getElementById("messages-list");
    const msgDetailEl = document.getElementById("message-detail");
    const dashLastMessageEl = document.getElementById("dash-last-message");

    function getMessages() {
      return loadArray(STORAGE_KEYS.messages);
    }
    function setMessages(messages) {
      saveArray(STORAGE_KEYS.messages, messages);
      renderMessages();
      updateDashboard();
    }

        function renderMessages() {
      const messages = getMessages().sort(
        (a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0)
      );
      document.getElementById("nav-messages").textContent = messages.length;

      if (!messages.length) {
        messagesListEl.innerHTML = '<p class="empty-state">Aucun message pour l‚Äôinstant.</p>';
        dashLastMessageEl.innerHTML = '<p class="empty-state">Aucun message pour l‚Äôinstant.</p>';
        msgDetailEl.innerHTML = '<p class="empty-state">Aucun message s√©lectionn√©.</p>';
        if (replyBlock) replyBlock.style.display = "none";
        return;
      }

      // liste principale
      let html =
        '<table><thead><tr><th>Nom</th><th>E-mail</th><th>Source</th><th>Message</th><th></th></tr></thead><tbody>';
      messages.forEach((m, index) => {
        const short = m.content ? m.content.substring(0, 70) + (m.content.length > 70 ? "‚Ä¶" : "") : "";
        html += `<tr data-index="${index}">
          <td>${m.name || "-"}</td>
          <td>${m.email || "-"}</td>
          <td><span class="tag">${m.channel || "Formulaire blog"}</span></td>
          <td>${short || "-"}</td>
          <td><button class="btn-small btn-danger" data-delete-msg="${index}">Suppr.</button></td>
        </tr>`;
      });
      html += "</tbody></table>";
      messagesListEl.innerHTML = html;

      // dernier message pour le dashboard
      const last = messages[0];
      dashLastMessageEl.innerHTML =
        `<p><strong>${last.name || "Anonyme"}</strong> ‚Äì <span class="tag">${last.channel || "Formulaire blog"}</span></p>
         <p style="font-size:12px; color:var(--text-muted); margin-top:4px;">${last.email || "Pas d‚Äôe-mail"}</p>
         <p style="margin-top:6px;">${last.content || ""}</p>`;

      // suppression
      messagesListEl.querySelectorAll("[data-delete-msg]").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          e.stopPropagation();
          const idx = Number(btn.getAttribute("data-delete-msg"));
          if (!confirm("Supprimer ce message ?")) return;
          const arr = getMessages();
          arr.splice(idx, 1);
          setMessages(arr);
        });
      });

      // s√©lection + r√©ponse
      messagesListEl.querySelectorAll("tr[data-index]").forEach((row) => {
        row.addEventListener("click", () => {
          const idx = Number(row.getAttribute("data-index"));
          const m = messages[idx];
          currentMessageIndex = idx;

          msgDetailEl.innerHTML =
            `<p><strong>${m.name || "Anonyme"}</strong> ‚Äì <span class="tag">${m.channel || "Formulaire blog"}</span></p>
             <p style="font-size:12px; color:var(--text-muted); margin-top:4px;">${m.email || "Pas d‚Äôe-mail"}</p>
             <p style="font-size:12px; color:var(--text-muted); margin-top:4px;">${m.createdAt ? new Date(m.createdAt).toLocaleString() : ""}</p>
             <p style="margin-top:8px;">${m.content || ""}</p>`;

          if (replyBlock) {
            replyBlock.style.display = "block";
            if (replyTextarea) replyTextarea.value = m.replyText || "";
            if (replyStatus) replyStatus.textContent = "";
          }
        });
      });
    }

        if (saveReplyBtn) {
      saveReplyBtn.addEventListener("click", () => {
        if (currentMessageIndex === null) return;
        const messages = getMessages();
        const m = messages[currentMessageIndex];
        if (!m) return;
        m.replyText = replyTextarea.value.trim();
        m.replySavedAt = new Date().toISOString();
        setMessages(messages);
        if (replyStatus) {
          replyStatus.textContent = "Brouillon de r√©ponse enregistr√© pour ce message.";
        }
      });
    }

    if (copyReplyBtn) {
      copyReplyBtn.addEventListener("click", async () => {
        if (!replyTextarea || !replyTextarea.value.trim()) {
          alert("√âcris d‚Äôabord une r√©ponse √† copier.");
          return;
        }
        try {
          await navigator.clipboard.writeText(replyTextarea.value);
          if (replyStatus) replyStatus.textContent = "Texte copi√© dans le presse-papiers.";
        } catch (e) {
          if (replyStatus) replyStatus.textContent = "";
          alert("Impossible de copier automatiquement, mais tu peux s√©lectionner le texte et faire Ctrl+C.");
        }
      });
    }
    
        if (sendEmailBtn) {
      sendEmailBtn.addEventListener("click", () => {
        if (currentMessageIndex === null) {
          alert("Choisis d‚Äôabord un message dans la liste.");
          return;
        }

        const messages = getMessages();
        const m = messages[currentMessageIndex];
        if (!m || !m.email) {
          alert("Ce message n‚Äôa pas d‚Äôadresse e-mail. Tu peux r√©pondre par Instagram, Facebook ou WhatsApp.");
          return;
        }

        const subject = "R√©ponse √† ton message sur Journal de Nabie";
        const bodyDefault = m.replyText && m.replyText.trim()
          ? m.replyText.trim()
          : "Salam alaykoum ma belle,\n\n";
        const mailto = "mailto:" +
          encodeURIComponent(m.email) +
          "?subject=" + encodeURIComponent(subject) +
          "&body=" + encodeURIComponent(bodyDefault);

        window.location.href = mailto;
      });
    }


    if (msgForm) {
      msgForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const name = document.getElementById("msg-name").value.trim();
        const email = document.getElementById("msg-email").value.trim();
        const channel = document.getElementById("msg-channel").value;
        const content = document.getElementById("msg-content").value.trim();

        if (!content) {
          alert("Merci d‚Äô√©crire au moins un message.");
          return;
        }

        const messages = getMessages();
        messages.push({
          id: Date.now().toString(),
          name,
          email,
          channel,
          content,
          createdAt: new Date().toISOString(),
        });
        setMessages(messages);
        msgForm.reset();
      });
    }

    if (msgResetBtn) {
      msgResetBtn.addEventListener("click", () => {
        msgForm.reset();
      });
    }

    // ===== SUBSCRIBERS =====
    const subForm = document.getElementById("sub-form");
    const subResetBtn = document.getElementById("sub-reset");
    const subsListEl = document.getElementById("subs-list");

    function getSubs() {
      return loadArray(STORAGE_KEYS.subscribers);
    }
    function setSubs(subs) {
      saveArray(STORAGE_KEYS.subscribers, subs);
      renderSubs();
      updateDashboard();
    }

    function renderSubs() {
  const subs = getSubs().sort(
    (a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0)
  );
  document.getElementById("nav-subs").textContent = subs.length;

  if (!subs.length) {
    subsListEl.innerHTML = '<p class="empty-state">Aucune abonn√©e pour l‚Äôinstant.</p>';
    return;
  }

  let html =
    '<div class="table-wrapper"><table><thead><tr><th>Pr√©nom</th><th>E-mail</th><th>Source</th><th></th></tr></thead><tbody>';
  subs.forEach((s, index) => {
    html += `<tr>
      <td>${s.name || "-"}</td>
      <td>${s.email}</td>
      <td><span class="tag">${s.source || "Formulaire"}</span></td>
      <td><button class="btn-small btn-danger" data-delete-sub="${index}">Suppr.</button></td>
    </tr>`;
  });
  html += "</tbody></table></div>";
  subsListEl.innerHTML = html;

  subsListEl.querySelectorAll("[data-delete-sub]").forEach((btn) => {
    btn.addEventListener("click", () => {
      const idx = Number(btn.getAttribute("data-delete-sub"));
      if (!confirm("Supprimer cette abonn√©e ?")) return;
      const arr = getSubs();
      arr.splice(idx, 1);
      setSubs(arr);
    });
  });
}

    if (subForm) {
      subForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const name = document.getElementById("sub-name").value.trim();
        const email = document.getElementById("sub-email").value.trim();
        const source = document.getElementById("sub-source").value;

        if (!email) {
          alert("Merci d‚Äôajouter au moins un e-mail.");
          return;
        }

        const subs = getSubs();
        if (subs.some((s) => s.email === email)) {
          alert("Cet e-mail est d√©j√† dans ta liste.");
          return;
        }

        subs.push({
          name,
          email,
          source,
          createdAt: new Date().toISOString(),
        });
        setSubs(subs);
        subForm.reset();
      });
    }

    if (subResetBtn) {
      subResetBtn.addEventListener("click", () => subForm.reset());
    }

    // ===== PLANS / SOUSCRIPTIONS =====
    const planForm = document.getElementById("plan-form");
    const planResetBtn = document.getElementById("plan-reset");
    const plansListEl = document.getElementById("plans-list");

    function getPlans() {
      return loadArray(STORAGE_KEYS.plans);
    }
    function setPlans(plans) {
      saveArray(STORAGE_KEYS.plans, plans);
      renderPlans();
      updateDashboard();
    }

   function renderPlans() {
  const plans = getPlans().sort(
    (a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0)
  );
  document.getElementById("nav-plans").textContent = plans.length;

  if (!plans.length) {
    plansListEl.innerHTML = '<p class="empty-state">Aucune souscription pour l‚Äôinstant.</p>';
    return;
  }

  let html =
    '<div class="table-wrapper"><table><thead><tr><th>Nom</th><th>Programme</th><th>Statut</th><th>Canal</th><th></th></tr></thead><tbody>';
  plans.forEach((p, index) => {
    html += `<tr>
      <td>${p.name || "-"}</td>
      <td>${p.offer || "-"}</td>
      <td>${p.status || "-"}</td>
      <td><span class="tag">${p.channel || "-"}</span></td>
      <td><button class="btn-small btn-danger" data-delete-plan="${index}">Suppr.</button></td>
    </tr>`;
  });
  html += "</tbody></table></div>";
  plansListEl.innerHTML = html;

  plansListEl.querySelectorAll("[data-delete-plan]").forEach((btn) => {
    btn.addEventListener("click", () => {
      const idx = Number(btn.getAttribute("data-delete-plan"));
      if (!confirm("Supprimer cette souscription ?")) return;
      const arr = getPlans();
      arr.splice(idx, 1);
      setPlans(arr);
    });
  });
}


    if (planForm) {
      planForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const name = document.getElementById("plan-name").value.trim();
        const email = document.getElementById("plan-email").value.trim();
        const offer = document.getElementById("plan-offer").value.trim();
        const channel = document.getElementById("plan-channel").value;
        const status = document.getElementById("plan-status").value;
        const note = document.getElementById("plan-note").value.trim();

        if (!name || !offer) {
          alert("Merci d‚Äôajouter au moins le nom et le programme.");
          return;
        }

        const plans = getPlans();
        plans.push({
          id: Date.now().toString(),
          name,
          email,
          offer,
          channel,
          status,
          note,
          createdAt: new Date().toISOString(),
        });
        setPlans(plans);
        planForm.reset();
      });
    }

    if (planResetBtn) {
      planResetBtn.addEventListener("click", () => planForm.reset());
    }

    // ===== DASHBOARD & EXPORT =====
    const exportTextarea = document.getElementById("export-json");
    const refreshExportBtn = document.getElementById("refresh-export");
    const wipeBtn = document.getElementById("wipe-storage");

    function updateExport() {
      const data = {
        posts: getPosts(),
        messages: getMessages(),
        subscribers: getSubs(),
        subscriptions: getPlans(),
      };
      exportTextarea.value = JSON.stringify(data, null, 2);
    }

    function updateDashboard() {
      const posts = getPosts();
      const messages = getMessages();
      const subs = getSubs();
      const plans = getPlans();

      document.getElementById("dash-posts").textContent = posts.length;
      document.getElementById("dash-messages").textContent = messages.length;
      document.getElementById("dash-subs").textContent = subs.length;
      document.getElementById("dash-plans").textContent = plans.length;

      const total = posts.length + messages.length + subs.length + plans.length;
      document.getElementById("nav-total").textContent = total + " √©l√©ments";

      updateExport();
    }

    if (refreshExportBtn) {
      refreshExportBtn.addEventListener("click", updateExport);
    }

    if (wipeBtn) {
      wipeBtn.addEventListener("click", () => {
        if (!confirm("Tu es s√ªre de vouloir tout effacer ?")) return;
        Object.values(STORAGE_KEYS).forEach((key) => localStorage.removeItem(key));
        renderPosts();
        renderMessages();
        renderSubs();
        renderPlans();
        updateDashboard();
      });
    }

        // ===== LOGIN LOGIC =====
    const loginScreen = document.getElementById("loginScreen");
    const adminShell = document.getElementById("adminShell");
    const loginForm = document.getElementById("login-form");
    const loginErrorEl = document.getElementById("login-error");

    function showAdmin() {
      if (loginScreen) loginScreen.style.display = "none";
      if (adminShell) adminShell.style.display = "grid"; // la .admin-shell est une grille
      sessionStorage.setItem("nb_admin_logged", "1");
      initAdmin(); // on lance l'admin une fois connect√©
    }

    function handleLogin(event) {
      event.preventDefault();
      const user = document.getElementById("login-username").value.trim();
      const pass = document.getElementById("login-password").value.trim();

      if (user === ADMIN_USERNAME && pass === ADMIN_PASSWORD) {
        loginErrorEl.textContent = "";
        showAdmin();
      } else {
        loginErrorEl.textContent = "Identifiants incorrects, r√©essaie in chaa Allah.";
      }
    }

    if (loginForm) {
      loginForm.addEventListener("submit", handleLogin);
    }

    // ===== INIT =====
    function initAdmin() {
      renderPosts();
      renderMessages();
      renderSubs();
      renderPlans();
      updateDashboard();
    }

    // Si d√©j√† connect√© dans cette session, on affiche directement l‚Äôadmin
    if (sessionStorage.getItem("nb_admin_logged") === "1") {
      showAdmin();
    } else {
      // Sinon, on reste sur l‚Äô√©cran de login
      if (loginScreen) loginScreen.style.display = "flex";
      if (adminShell) adminShell.style.display = "none";
    }


    initAdmin();
  </script>
</body>
</html>
